## Webot.py - скрипт для рекурсивного обхода сайта

Это стартовый код одного из моих экспериментальных проектов по мониторингу сайтов. Данный скрипт получает в качестве аргументов командной строки url сайта и выполняет обход всех его страниц до заданного уровня вложенности. Информация о структуре и содержимом сайта сохраняется в отдельную БД в таблицу pages. В процессе обхода сайта информация о найденных и обработанных страницах отображается в таблице log. 

Исходный код расположен в папке src. Там же есть 2 конфигурационных файла, которые позволяют сохранять настройки работы скрипта вместо того, чтобы указывать их каждый раз при запуске. Для работы скрипта требуется доступ к сервергу MySQL. Для каждого обрабатываемого сайта скрипт создает отдельную базу данных, поэтому должны быть права на `create`.

Создаваемые таблицы имеют следующую схему.
```
mysql > describe log;
+--------+------+------+-----+---------+----------------+
| Field  | Type | Null | Key | Default | Extra          |
+--------+------+------+-----+---------+----------------+
| id     | int  | NO   | PRI | NULL    | auto_increment |
| url    | text | NO   |     | NULL    |                |
| status | text | YES  |     | NULL    |                |
+--------+------+------+-----+---------+----------------+
```
Таблица `log`

```
mysql > describe pages;
+-----------+----------+------+-----+---------+-------+
| Field     | Type     | Null | Key | Default | Extra |
+-----------+----------+------+-----+---------+-------+
| id        | int      | NO   | PRI | NULL    |       |
| url       | text     | NO   |     | NULL    |       |
| level     | int      | NO   |     | NULL    |       |
| parent_id | int      | NO   |     | NULL    |       |
| code      | longtext | NO   |     | NULL    |       |
+-----------+----------+------+-----+---------+-------+
```
Таблица `pages`

Поля `id` и `parent_id` используются для сохранения иерархии переходов между страницами: `parent_id` - это айдишник страницы с которой мы попали на текущую страницу. В поле `code` последней таблицы в этом примере я сохранял hash html-кода страницы.

Чтобы продемонстрировать работоспособность скрипта я помести в папку `results` выгрузку содержимого таблицы `pages`, полученной в процесс обхода 3-х разных сайтов.

1. [Маленький персональный сайт веб-дизайнера](./results/anatkalinsi_com.log)
2. [Блог одного из разработчиков современного С++ - foonathan::blog()](./results/foonathan_net.log)
3. [Сайт образовательной платформы Skillbox (частично)](./results/skillbox_com.log)

Последний сайт содержит больше 10 тысяч страниц, поэтому я поместил в лог только первую тысячу, для демонстрации работы вполне достаточно. Разумеется данный скрипт позволяет обходить только сайты со статическими ссылками в html-коде. Для обхода сайтов, в которых за переходы между страницами отвечает java script он не подходит.
